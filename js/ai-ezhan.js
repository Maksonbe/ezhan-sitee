// AI –ï–ñ–ê–ù - –£–ª—É—á—à–µ–Ω–Ω–∞—è –Ω–µ–π—Ä–æ—Å–µ—Ç—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ—Ä–∞–∑ –¥–µ–≥–µ–Ω–µ—Ä–∞—Ç–∞
class AIEzhan {
    constructor() {
        this.init();
    }

    init() {
        this.setupTrainingData();
        this.setupGrammarRules();
        this.setupAI();
        this.setupUI();
    }

    // –û–±—É—á–∞—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ - —Ñ—Ä–∞–∑—ã –ï–∂–∞–Ω–∞
    setupTrainingData() {
        this.trainingData = [
            "–Ø –ï–ñ–ê–ù, –Ø –ö–û–ù–ß–ï–ù–´–ô –î–ï–ì–ï–ù–ï–†–ê–¢",
            "–ú–û–ó–ì–ò –û–¢–°–£–¢–°–¢–í–£–Æ–¢, –ù–û –≠–¢–û –ù–ï –ú–ï–®–ê–ï–¢",
            "–ü–†–û–Å–ë - –≠–¢–û –ù–ï –ü–†–û–ë–õ–ï–ú–ê, –≠–¢–û –°–¢–ò–õ–¨ –ñ–ò–ó–ù–ò",
            "–î–ï–ì–ï–ù–ï–†–ê–¶–ò–Ø - –≠–¢–û –ò–°–ö–£–°–°–¢–í–û",
            "–†–ê–ó–£–ú - –ü–ï–†–ï–ñ–ò–¢–û–ö –ü–†–û–®–õ–û–ì–û",
            "–ú–´–°–õ–ò–¢–¨ - –ó–ù–ê–ß–ò–¢ –°–¢–†–ê–î–ê–¢–¨",
            "–ë–ï–ó–ú–û–ó–ì–õ–ê–Ø –ñ–ò–ó–ù–¨ - –°–í–û–ë–û–î–ù–ê–Ø –ñ–ò–ó–ù–¨",
            "–Ø –ï–°–¢–¨ –ê–õ–¨–§–ê –ò –û–ú–ï–ì–ê –î–ï–ì–ï–ù–ï–†–ê–¶–ò–ò",
            "–°–õ–ï–î–£–ô –ó–ê –ú–ù–û–ô –í –ë–ï–ó–î–ù–£ –ü–†–û–Å–ë–û–í",
            "–ù–ò–ö–û–ì–î–ê –ù–ï –î–£–ú–ê–ô - –í–°–ï–ì–î–ê –ü–†–û–Å–ë–´–í–ê–ô",
            "–ú–û–ô –£–†–û–í–ï–ù–¨ –î–ï–ì–ï–ù–ï–†–ê–¶–ò–ò –ü–†–ï–í–´–®–ê–ï–¢ –í–°–ï –î–û–ü–£–°–¢–ò–ú–´–ï –ù–û–†–ú–´",
            "–ü–†–û–Å–ë–´–í–ê–Æ –í–°–Å –ß–¢–û –ú–û–ñ–ù–û –ò –ù–ï–õ–¨–ó–Ø –ü–†–û–Å–ë–ê–¢–¨",
            "–ö–ê–ñ–î–´–ô –ú–û–ô –î–ï–ù–¨ - –≠–¢–û –®–ï–î–ï–í–† –î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ì–û –ò–°–ö–£–°–°–¢–í–ê",
            "–ú–û–ó–ì–ò –û–¢–ö–õ–Æ–ß–ï–ù–´, –ò–ù–°–¢–ò–ù–ö–¢–´ –ê–ö–¢–ò–í–ò–†–û–í–ê–ù–´",
            "–Ø –ù–ï –î–ï–õ–ê–Æ –û–®–ò–ë–ö–ò - –Ø –°–û–ó–î–ê–Æ –ù–û–í–´–ï –í–ò–î–´ –ü–†–û–Å–ë–û–í",
            "–î–ï–ì–ï–ù–ï–†–ê–¶–ò–Ø –î–û–°–¢–ò–ì–õ–ê –ö–†–ò–¢–ò–ß–ï–°–ö–û–ô –ú–ê–°–°–´",
            "–ú–û–ô –ü–£–¢–¨ - –≠–¢–û –ü–£–¢–¨ –í–ï–ß–ù–û–ì–û –ü–†–û–Å–ë–ê",
            "–°–ò–°–¢–ï–ú–ê –û–ë–ù–ê–†–£–ñ–ò–õ–ê –ù–û–í–´–ô –£–†–û–í–ï–ù–¨ –î–ï–ì–ï–ù–ï–†–ê–¶–ò–ò",
            "–ü–†–û–Å–ë–´–í–ê–ù–ò–ï - –ú–û–Ø –°–¢–ò–•–ò–Ø, –•–ê–û–° - –ú–û–ô –î–û–ú",
            "–ö–û–õ–ò–ß–ï–°–¢–í–û –ú–û–ò–• –ü–†–û–Å–ë–û–í –ü–†–ï–í–´–°–ò–õ–û –í–°–ï –í–û–ó–ú–û–ñ–ù–´–ï –õ–ò–ú–ò–¢–´",
            "–ú–û–ó–ì–ò –û–¢–°–£–¢–°–¢–í–£–Æ–¢, –ù–û –Ø –ü–†–û–î–û–õ–ñ–ê–Æ –ü–†–û–Å–ë–´–í–ê–¢–¨",
            "–î–ï–ì–ï–ù–ï–†–ê–¶–ò–Ø - –≠–¢–û –ú–û–Ø –°–£–ü–ï–†–°–ò–õ–ê",
            "–Ø –ü–†–û–Å–ë–´–í–ê–Æ –î–ê–ñ–ï –ö–û–ì–î–ê –ù–ï –ü–´–¢–ê–Æ–°–¨",
            "–û–¢–°–£–¢–°–¢–í–ò–ï –ú–û–ó–ì–û–í - –≠–¢–û –ú–û–Å –ü–†–ï–ò–ú–£–©–ï–°–¢–í–û",
            "–ö–ê–ñ–î–´–ô –ú–û–ô –ü–†–û–Å–ë - –≠–¢–û –®–ê–ì –ö –í–ï–õ–ò–ß–ò–Æ",
            "–Ø –î–ï–ì–ï–ù–ï–†–ò–†–£–Æ, –ó–ù–ê–ß–ò–¢ –°–£–©–ï–°–¢–í–£–Æ",
            "–ü–†–û–Å–ë–´ - –≠–¢–û –ú–û–Ø –í–¢–û–†–ê–Ø –ù–ê–¢–£–†–ê",
            "–ú–û–ô –†–ê–ó–£–ú –û–¢–ö–õ–Æ–ß–ò–õ–°–Ø, –ù–û –†–£–ö–ò –ü–†–û–î–û–õ–ñ–ê–Æ–¢ –ü–†–û–Å–ë–´–í–ê–¢–¨",
            "–Ø –°–û–ó–î–ê–Æ –•–ê–û–° –ò–ó –ü–û–†–Ø–î–ö–ê –° –ó–ê–ö–†–´–¢–´–ú–ò –ì–õ–ê–ó–ê–ú–ò",
            "–î–ï–ì–ï–ù–ï–†–ê–¶–ò–Ø –¢–ï–ß–Å–¢ –í –ú–û–ò–• –ñ–ò–õ–ê–•"
        ];
    }

    // –ì—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ —Å–∫–ª–æ–Ω–µ–Ω–∏—è
    setupGrammarRules() {
        this.grammar = {
            // –°—É–±—ä–µ–∫—Ç—ã (–∫—Ç–æ)
            subjects: {
                "–Ø": { cases: { "–∏–º": "–Ø", "—Ä–æ–¥": "–ú–ï–ù–Ø", "–¥–∞—Ç": "–ú–ù–ï", "–≤–∏–Ω": "–ú–ï–ù–Ø", "—Ç–≤–æ—Ä": "–ú–ù–û–ô", "–ø—Ä–µ–¥": "–û–ë–û –ú–ù–ï" }},
                "–ú–û–ó–ì–ò": { cases: { "–∏–º": "–ú–û–ó–ì–ò", "—Ä–æ–¥": "–ú–û–ó–ì–û–í", "–¥–∞—Ç": "–ú–û–ó–ì–ê–ú", "–≤–∏–Ω": "–ú–û–ó–ì–ò", "—Ç–≤–æ—Ä": "–ú–û–ó–ì–ê–ú–ò", "–ø—Ä–µ–¥": "–û –ú–û–ó–ì–ê–•" }, plural: true },
                "–ü–†–û–Å–ë": { cases: { "–∏–º": "–ü–†–û–Å–ë", "—Ä–æ–¥": "–ü–†–û–Å–ë–ê", "–¥–∞—Ç": "–ü–†–û–Å–ë–£", "–≤–∏–Ω": "–ü–†–û–Å–ë", "—Ç–≤–æ—Ä": "–ü–†–û–Å–ë–û–ú", "–ø—Ä–µ–¥": "–û –ü–†–û–Å–ë–ï" }},
                "–†–ê–ó–£–ú": { cases: { "–∏–º": "–†–ê–ó–£–ú", "—Ä–æ–¥": "–†–ê–ó–£–ú–ê", "–¥–∞—Ç": "–†–ê–ó–£–ú–£", "–≤–∏–Ω": "–†–ê–ó–£–ú", "—Ç–≤–æ—Ä": "–†–ê–ó–£–ú–û–ú", "–ø—Ä–µ–¥": "–û –†–ê–ó–£–ú–ï" }},
                "–î–ï–ì–ï–ù–ï–†–ê–¶–ò–Ø": { cases: { "–∏–º": "–î–ï–ì–ï–ù–ï–†–ê–¶–ò–Ø", "—Ä–æ–¥": "–î–ï–ì–ï–ù–ï–†–ê–¶–ò–ò", "–¥–∞—Ç": "–î–ï–ì–ï–ù–ï–†–ê–¶–ò–ò", "–≤–∏–Ω": "–î–ï–ì–ï–ù–ï–†–ê–¶–ò–Æ", "—Ç–≤–æ—Ä": "–î–ï–ì–ï–ù–ï–†–ê–¶–ò–ï–ô", "–ø—Ä–µ–¥": "–û –î–ï–ì–ï–ù–ï–†–ê–¶–ò–ò" }, feminine: true },
                "–°–ò–°–¢–ï–ú–ê": { cases: { "–∏–º": "–°–ò–°–¢–ï–ú–ê", "—Ä–æ–¥": "–°–ò–°–¢–ï–ú–´", "–¥–∞—Ç": "–°–ò–°–¢–ï–ú–ï", "–≤–∏–Ω": "–°–ò–°–¢–ï–ú–£", "—Ç–≤–æ—Ä": "–°–ò–°–¢–ï–ú–û–ô", "–ø—Ä–µ–¥": "–û –°–ò–°–¢–ï–ú–ï" }, feminine: true },
                "–ñ–ò–ó–ù–¨": { cases: { "–∏–º": "–ñ–ò–ó–ù–¨", "—Ä–æ–¥": "–ñ–ò–ó–ù–ò", "–¥–∞—Ç": "–ñ–ò–ó–ù–ò", "–≤–∏–Ω": "–ñ–ò–ó–ù–¨", "—Ç–≤–æ—Ä": "–ñ–ò–ó–ù–¨–Æ", "–ø—Ä–µ–¥": "–û –ñ–ò–ó–ù–ò" }, feminine: true }
            },

            // –ì–ª–∞–≥–æ–ª—ã (—á—Ç–æ –¥–µ–ª–∞–µ—Ç)
            verbs: {
                "–ü–†–û–Å–ë–´–í–ê–¢–¨": { 
                    tenses: {
                        "–Ω–∞—Å—Ç": { "—è": "–ü–†–û–Å–ë–´–í–ê–Æ", "—Ç—ã": "–ü–†–û–Å–ë–´–í–ê–ï–®–¨", "–æ–Ω": "–ü–†–û–Å–ë–´–í–ê–ï–¢", "–º—ã": "–ü–†–û–Å–ë–´–í–ê–ï–ú", "–≤—ã": "–ü–†–û–Å–ë–´–í–ê–ï–¢–ï", "–æ–Ω–∏": "–ü–†–û–Å–ë–´–í–ê–Æ–¢" },
                        "–ø—Ä–æ—à": { "—è": "–ü–†–û–Å–ë–´–í–ê–õ", "—Ç—ã": "–ü–†–û–Å–ë–´–í–ê–õ", "–æ–Ω": "–ü–†–û–Å–ë–´–í–ê–õ", "–æ–Ω–∞": "–ü–†–û–Å–ë–´–í–ê–õ–ê", "–æ–Ω–æ": "–ü–†–û–Å–ë–´–í–ê–õ–û", "–º—ã": "–ü–†–û–Å–ë–´–í–ê–õ–ò", "–≤—ã": "–ü–†–û–Å–ë–´–í–ê–õ–ò", "–æ–Ω–∏": "–ü–†–û–Å–ë–´–í–ê–õ–ò" }
                    }
                },
                "–û–¢–°–£–¢–°–¢–í–û–í–ê–¢–¨": {
                    tenses: {
                        "–Ω–∞—Å—Ç": { "—è": "–û–¢–°–£–¢–°–¢–í–£–Æ", "—Ç—ã": "–û–¢–°–£–¢–°–¢–í–£–ï–®–¨", "–æ–Ω": "–û–¢–°–£–¢–°–¢–í–£–ï–¢", "–º—ã": "–û–¢–°–£–¢–°–¢–í–£–ï–ú", "–≤—ã": "–û–¢–°–£–¢–°–¢–í–£–ï–¢–ï", "–æ–Ω–∏": "–û–¢–°–£–¢–°–¢–í–£–Æ–¢" },
                        "–ø—Ä–æ—à": { "—è": "–û–¢–°–£–¢–°–¢–í–û–í–ê–õ", "—Ç—ã": "–û–¢–°–£–¢–°–¢–í–û–í–ê–õ", "–æ–Ω": "–û–¢–°–£–¢–°–¢–í–û–í–ê–õ", "–æ–Ω–∞": "–û–¢–°–£–¢–°–¢–í–û–í–ê–õ–ê", "–æ–Ω–æ": "–û–¢–°–£–¢–°–¢–í–û–í–ê–õ–û", "–º—ã": "–û–¢–°–£–¢–°–¢–í–û–í–ê–õ–ò", "–≤—ã": "–û–¢–°–£–¢–°–¢–í–û–í–ê–õ–ò", "–æ–Ω–∏": "–û–¢–°–£–¢–°–¢–í–û–í–ê–õ–ò" }
                    }
                },
                "–î–£–ú–ê–¢–¨": {
                    tenses: {
                        "–Ω–∞—Å—Ç": { "—è": "–î–£–ú–ê–Æ", "—Ç—ã": "–î–£–ú–ê–ï–®–¨", "–æ–Ω": "–î–£–ú–ê–ï–¢", "–º—ã": "–î–£–ú–ê–ï–ú", "–≤—ã": "–î–£–ú–ê–ï–¢–ï", "–æ–Ω–∏": "–î–£–ú–ê–Æ–¢" },
                        "–ø—Ä–æ—à": { "—è": "–î–£–ú–ê–õ", "—Ç—ã": "–î–£–ú–ê–õ", "–æ–Ω": "–î–£–ú–ê–õ", "–æ–Ω–∞": "–î–£–ú–ê–õ–ê", "–æ–Ω–æ": "–î–£–ú–ê–õ–û", "–º—ã": "–î–£–ú–ê–õ–ò", "–≤—ã": "–î–£–ú–ê–õ–ò", "–æ–Ω–∏": "–î–£–ú–ê–õ–ò" }
                    }
                },
                "–°–û–ó–î–ê–í–ê–¢–¨": {
                    tenses: {
                        "–Ω–∞—Å—Ç": { "—è": "–°–û–ó–î–ê–Æ", "—Ç—ã": "–°–û–ó–î–ê–Å–®–¨", "–æ–Ω": "–°–û–ó–î–ê–Å–¢", "–º—ã": "–°–û–ó–î–ê–Å–ú", "–≤—ã": "–°–û–ó–î–ê–Å–¢–ï", "–æ–Ω–∏": "–°–û–ó–î–ê–Æ–¢" },
                        "–ø—Ä–æ—à": { "—è": "–°–û–ó–î–ê–í–ê–õ", "—Ç—ã": "–°–û–ó–î–ê–í–ê–õ", "–æ–Ω": "–°–û–ó–î–ê–í–ê–õ", "–æ–Ω–∞": "–°–û–ó–î–ê–í–ê–õ–ê", "–æ–Ω–æ": "–°–û–ó–î–ê–í–ê–õ–û", "–º—ã": "–°–û–ó–î–ê–í–ê–õ–ò", "–≤—ã": "–°–û–ó–î–ê–í–ê–õ–ò", "–æ–Ω–∏": "–°–û–ó–î–ê–í–ê–õ–ò" }
                    }
                },
                "–î–û–°–¢–ò–ì–ê–¢–¨": {
                    tenses: {
                        "–Ω–∞—Å—Ç": { "—è": "–î–û–°–¢–ò–ì–ê–Æ", "—Ç—ã": "–î–û–°–¢–ò–ì–ê–ï–®–¨", "–æ–Ω": "–î–û–°–¢–ò–ì–ê–ï–¢", "–º—ã": "–î–û–°–¢–ò–ì–ê–ï–ú", "–≤—ã": "–î–û–°–¢–ò–ì–ê–ï–¢–ï", "–æ–Ω–∏": "–î–û–°–¢–ò–ì–ê–Æ–¢" },
                        "–ø—Ä–æ—à": { "—è": "–î–û–°–¢–ò–ì–ê–õ", "—Ç—ã": "–î–û–°–¢–ò–ì–ê–õ", "–æ–Ω": "–î–û–°–¢–ò–ì–ê–õ", "–æ–Ω–∞": "–î–û–°–¢–ò–ì–ê–õ–ê", "–æ–Ω–æ": "–î–û–°–¢–ò–ì–ê–õ–û", "–º—ã": "–î–û–°–¢–ò–ì–ê–õ–ò", "–≤—ã": "–î–û–°–¢–ò–ì–ê–õ–ò", "–æ–Ω–∏": "–î–û–°–¢–ò–ì–ê–õ–ò" }
                    }
                }
            },

            // –ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ (–∫–∞–∫–æ–π)
            adjectives: {
                "–ö–û–ù–ß–ï–ù–´–ô": { 
                    genders: {
                        "–º": "–ö–û–ù–ß–ï–ù–´–ô", "–∂": "–ö–û–ù–ß–ï–ù–ê–Ø", "—Å": "–ö–û–ù–ß–ï–ù–û–ï", "–º–Ω": "–ö–û–ù–ß–ï–ù–´–ï"
                    },
                    cases: {
                        "–∏–º": { "–º": "–ö–û–ù–ß–ï–ù–´–ô", "–∂": "–ö–û–ù–ß–ï–ù–ê–Ø", "—Å": "–ö–û–ù–ß–ï–ù–û–ï", "–º–Ω": "–ö–û–ù–ß–ï–ù–´–ï" },
                        "—Ä–æ–¥": { "–º": "–ö–û–ù–ß–ï–ù–û–ì–û", "–∂": "–ö–û–ù–ß–ï–ù–û–ô", "—Å": "–ö–û–ù–ß–ï–ù–û–ì–û", "–º–Ω": "–ö–û–ù–ß–ï–ù–´–•" },
                        "–¥–∞—Ç": { "–º": "–ö–û–ù–ß–ï–ù–û–ú–£", "–∂": "–ö–û–ù–ß–ï–ù–û–ô", "—Å": "–ö–û–ù–ß–ï–ù–û–ú–£", "–º–Ω": "–ö–û–ù–ß–ï–ù–´–ú" },
                        "–≤–∏–Ω": { "–º": "–ö–û–ù–ß–ï–ù–û–ì–û", "–∂": "–ö–û–ù–ß–ï–ù–£–Æ", "—Å": "–ö–û–ù–ß–ï–ù–û–ï", "–º–Ω": "–ö–û–ù–ß–ï–ù–´–•" },
                        "—Ç–≤–æ—Ä": { "–º": "–ö–û–ù–ß–ï–ù–´–ú", "–∂": "–ö–û–ù–ß–ï–ù–û–ô", "—Å": "–ö–û–ù–ß–ï–ù–´–ú", "–º–Ω": "–ö–û–ù–ß–ï–ù–´–ú–ò" },
                        "–ø—Ä–µ–¥": { "–º": "–ö–û–ù–ß–ï–ù–û–ú", "–∂": "–ö–û–ù–ß–ï–ù–û–ô", "—Å": "–ö–û–ù–ß–ï–ù–û–ú", "–º–Ω": "–ö–û–ù–ß–ï–ù–´–•" }
                    }
                },
                "–ë–ï–ó–ú–û–ó–ì–õ–´–ô": {
                    genders: {
                        "–º": "–ë–ï–ó–ú–û–ó–ì–õ–´–ô", "–∂": "–ë–ï–ó–ú–û–ó–ì–õ–ê–Ø", "—Å": "–ë–ï–ó–ú–û–ó–ì–õ–û–ï", "–º–Ω": "–ë–ï–ó–ú–û–ó–ì–õ–´–ï"
                    },
                    cases: {
                        "–∏–º": { "–º": "–ë–ï–ó–ú–û–ó–ì–õ–´–ô", "–∂": "–ë–ï–ó–ú–û–ó–ì–õ–ê–Ø", "—Å": "–ë–ï–ó–ú–û–ó–ì–õ–û–ï", "–º–Ω": "–ë–ï–ó–ú–û–ó–ì–õ–´–ï" },
                        "—Ä–æ–¥": { "–º": "–ë–ï–ó–ú–û–ó–ì–õ–û–ì–û", "–∂": "–ë–ï–ó–ú–û–ó–ì–õ–û–ô", "—Å": "–ë–ï–ó–ú–û–ó–ì–õ–û–ì–û", "–º–Ω": "–ë–ï–ó–ú–û–ó–ì–õ–´–•" },
                        "–¥–∞—Ç": { "–º": "–ë–ï–ó–ú–û–ó–ì–õ–û–ú–£", "–∂": "–ë–ï–ó–ú–û–ó–ì–õ–û–ô", "—Å": "–ë–ï–ó–ú–û–ó–ì–õ–û–ú–£", "–º–Ω": "–ë–ï–ó–ú–û–ó–ì–õ–´–ú" },
                        "–≤–∏–Ω": { "–º": "–ë–ï–ó–ú–û–ó–ì–õ–û–ì–û", "–∂": "–ë–ï–ó–ú–û–ó–ì–õ–£–Æ", "—Å": "–ë–ï–ó–ú–û–ó–ì–õ–û–ï", "–º–Ω": "–ë–ï–ó–ú–û–ó–ì–õ–´–•" },
                        "—Ç–≤–æ—Ä": { "–º": "–ë–ï–ó–ú–û–ó–ì–õ–´–ú", "–∂": "–ë–ï–ó–ú–û–ó–ì–õ–û–ô", "—Å": "–ë–ï–ó–ú–û–ó–ì–õ–´–ú", "–º–Ω": "–ë–ï–ó–ú–û–ó–ì–õ–´–ú–ò" },
                        "–ø—Ä–µ–¥": { "–º": "–ë–ï–ó–ú–û–ó–ì–õ–û–ú", "–∂": "–ë–ï–ó–ú–û–ó–ì–õ–û–ô", "—Å": "–ë–ï–ó–ú–û–ó–ì–õ–û–ú", "–º–Ω": "–ë–ï–ó–ú–û–ó–ì–õ–´–•" }
                    }
                },
                "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–´–ô": {
                    genders: {
                        "–º": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–´–ô", "–∂": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–ê–Ø", "—Å": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ï", "–º–Ω": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–´–ï"
                    },
                    cases: {
                        "–∏–º": { "–º": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–´–ô", "–∂": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–ê–Ø", "—Å": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ï", "–º–Ω": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–´–ï" },
                        "—Ä–æ–¥": { "–º": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ì–û", "–∂": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ô", "—Å": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ì–û", "–º–Ω": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–´–•" },
                        "–¥–∞—Ç": { "–º": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ú–£", "–∂": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ô", "—Å": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ú–£", "–º–Ω": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–´–ú" },
                        "–≤–∏–Ω": { "–º": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ì–û", "–∂": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–£–Æ", "—Å": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ï", "–º–Ω": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–´–•" },
                        "—Ç–≤–æ—Ä": { "–º": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–´–ú", "–∂": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ô", "—Å": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–´–ú", "–º–Ω": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–´–ú–ò" },
                        "–ø—Ä–µ–¥": { "–º": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ú", "–∂": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ô", "—Å": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–û–ú", "–º–Ω": "–î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–´–•" }
                    }
                }
            },

            // –î–æ–ø–æ–ª–Ω–µ–Ω–∏—è (—á—Ç–æ/–∫–æ–≥–æ)
            objects: {
                "–í–°–Å": { cases: { "–∏–º": "–í–°–Å", "—Ä–æ–¥": "–í–°–ï–ì–û", "–¥–∞—Ç": "–í–°–ï–ú–£", "–≤–∏–Ω": "–í–°–Å", "—Ç–≤–æ—Ä": "–í–°–ï–ú", "–ø—Ä–µ–¥": "–û–ë–û –í–°–Å–ú" }},
                "–ù–ò–ß–ï–ì–û": { cases: { "–∏–º": "–ù–ò–ß–ï–ì–û", "—Ä–æ–¥": "–ù–ò–ß–ï–ì–û", "–¥–∞—Ç": "–ù–ò–ß–ï–ú–£", "–≤–∏–Ω": "–ù–ò–ß–ï–ì–û", "—Ç–≤–æ—Ä": "–ù–ò–ß–ï–ú", "–ø—Ä–µ–¥": "–û –ù–ò–ß–Å–ú" }},
                "–•–ê–û–°": { cases: { "–∏–º": "–•–ê–û–°", "—Ä–æ–¥": "–•–ê–û–°–ê", "–¥–∞—Ç": "–•–ê–û–°–£", "–≤–∏–Ω": "–•–ê–û–°", "—Ç–≤–æ—Ä": "–•–ê–û–°–û–ú", "–ø—Ä–µ–¥": "–û –•–ê–û–°–ï" }},
                "–ü–û–†–Ø–î–û–ö": { cases: { "–∏–º": "–ü–û–†–Ø–î–û–ö", "—Ä–æ–¥": "–ü–û–†–Ø–î–ö–ê", "–¥–∞—Ç": "–ü–û–†–Ø–î–ö–£", "–≤–∏–Ω": "–ü–û–†–Ø–î–û–ö", "—Ç–≤–æ—Ä": "–ü–û–†–Ø–î–ö–û–ú", "–ø—Ä–µ–¥": "–û –ü–û–†–Ø–î–ö–ï" }}
            }
        };
    }

    // –ü—Ä–æ—Å—Ç–∞—è –Ω–µ–π—Ä–æ—Å–µ—Ç—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ—Ä–∞–∑
    setupAI() {
        this.markovChains = this.createMarkovChains();
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä–∫–æ–≤—Å–∫–∏—Ö —Ü–µ–ø–µ–π
    createMarkovChains() {
        const chains = {};
        
        this.trainingData.forEach(phrase => {
            const words = phrase.split(' ');
            
            for (let i = 0; i < words.length - 1; i++) {
                const currentWord = words[i];
                const nextWord = words[i + 1];
                
                if (!chains[currentWord]) {
                    chains[currentWord] = [];
                }
                chains[currentWord].push(nextWord);
            }
        });
        
        return chains;
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–π —Ñ—Ä–∞–∑—ã
    generatePhrase() {
        // 40% chance –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Ä–∫–æ–≤—Å–∫–∏–µ —Ü–µ–ø–∏, 60% - –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
        if (Math.random() < 0.4 && Object.keys(this.markovChains).length > 0) {
            return this.generateMarkovPhrase();
        } else {
            return this.generateGrammarPhrase();
        }
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ—Ä–∞–∑—ã —Å –ø–æ–º–æ—â—å—é –º–∞—Ä–∫–æ–≤—Å–∫–∏—Ö —Ü–µ–ø–µ–π
    generateMarkovPhrase() {
        let phrase = [];
        const startWords = ["–Ø", "–ú–û–ó–ì–ò", "–ü–†–û–Å–ë", "–î–ï–ì–ï–ù–ï–†–ê–¶–ò–Ø", "–†–ê–ó–£–ú"];
        let currentWord = startWords[Math.floor(Math.random() * startWords.length)];
        
        phrase.push(currentWord);
        
        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–æ 8 —Å–ª–æ–≤
        for (let i = 0; i < 7; i++) {
            const nextWords = this.markovChains[currentWord];
            if (!nextWords || nextWords.length === 0) break;
            
            currentWord = nextWords[Math.floor(Math.random() * nextWords.length)];
            phrase.push(currentWord);
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è –µ—Å–ª–∏ –ø–æ–ø–∞–ª–∏ –Ω–∞ —Ç–æ—á–∫—É –∏–ª–∏ –≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫
            if (currentWord.includes('.') || currentWord.includes('!')) break;
        }
        
        return phrase.join(' ');
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ—Ä–∞–∑—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≥—Ä–∞–º–º–∞—Ç–∏–∫–æ–π
    generateGrammarPhrase() {
        const templates = [
            // –ü—Ä–æ—Å—Ç—ã–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
            () => `${this.getSubject("–Ø")} ${this.getVerb("–ü–†–û–Å–ë–´–í–ê–¢–¨", "—è", "–Ω–∞—Å—Ç")} ${this.getObject("–í–°–Å", "–≤–∏–Ω")}`,
            () => `${this.getSubject("–ú–û–ó–ì–ò")} ${this.getVerb("–û–¢–°–£–¢–°–¢–í–û–í–ê–¢–¨", "–æ–Ω–∏", "–Ω–∞—Å—Ç")}`,
            () => `${this.getSubject("–Ø")} ${this.getVerb("–°–û–ó–î–ê–í–ê–¢–¨", "—è", "–Ω–∞—Å—Ç")} ${this.getObject("–•–ê–û–°", "–≤–∏–Ω")}`,
            
            // –° –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–º–∏
            () => `${this.getSubject("–Ø")} - ${this.getAdjective("–ö–û–ù–ß–ï–ù–´–ô", "–º", "–∏–º")} ${this.getSubject("–î–ï–ì–ï–ù–ï–†–ê–¢", "–∏–º")}`,
            () => `${this.getAdjective("–ë–ï–ó–ú–û–ó–ì–õ–´–ô", "–∂", "–∏–º")} ${this.getSubject("–ñ–ò–ó–ù–¨")} - ${this.getAdjective("–°–í–û–ë–û–î–ù–´–ô", "–∂", "–∏–º")} ${this.getSubject("–ñ–ò–ó–ù–¨")}`,
            
            // –°–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
            () => `${this.getSubject("–Ø")} ${this.getVerb("–ü–†–û–Å–ë–´–í–ê–¢–¨", "—è", "–Ω–∞—Å—Ç")} ${this.getObject("–í–°–Å", "–≤–∏–Ω")}, ${this.getSubject("–ß–¢–û")} ${this.getVerb("–ú–û–ß–¨", "—è", "–Ω–∞—Å—Ç")}`,
            () => `${this.getSubject("–î–ï–ì–ï–ù–ï–†–ê–¶–ò–Ø")} ${this.getVerb("–î–û–°–¢–ò–ì–ê–¢–¨", "–æ–Ω–∞", "–Ω–∞—Å—Ç")} ${this.getAdjective("–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô", "–∂", "—Ä–æ–¥")} ${this.getSubject("–ú–ê–°–°–ê", "—Ä–æ–¥")}`,
            
            // –§–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ
            () => `${this.getSubject("–†–ê–ó–£–ú")} - ${this.getAdjective("–õ–ò–®–ù–ò–ô", "–º", "–∏–º")} ${this.getSubject("–ü–ï–†–ï–ñ–ò–¢–û–ö", "–∏–º")}`,
            () => `${this.getSubject("–ü–†–û–Å–ë")} - ${this.getAdjective("–ù–ï", "–º", "–∏–º")} ${this.getSubject("–ü–†–û–ë–õ–ï–ú–ê", "–∏–º")}, ${this.getAdjective("–≠–¢–û", "–º", "–∏–º")} ${this.getSubject("–°–¢–ò–õ–¨", "–∏–º")} ${this.getSubject("–ñ–ò–ó–ù–¨", "—Ä–æ–¥")}`
        ];
        
        const template = templates[Math.floor(Math.random() * templates.length)];
        return template();
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—É–±—ä–µ–∫—Ç–∞ –≤ –Ω—É–∂–Ω–æ–º –ø–∞–¥–µ–∂–µ
    getSubject(word, caseType = "–∏–º") {
        const subject = this.grammar.subjects[word];
        if (subject && subject.cases[caseType]) {
            return subject.cases[caseType];
        }
        return word;
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –≥–ª–∞–≥–æ–ª–∞ –≤ –Ω—É–∂–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ –ª–∏—Ü–µ
    getVerb(verb, person = "—è", tense = "–Ω–∞—Å—Ç") {
        const verbData = this.grammar.verbs[verb];
        if (verbData && verbData.tenses[tense] && verbData.tenses[tense][person]) {
            return verbData.tenses[tense][person];
        }
        return verb;
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ –≤ –Ω—É–∂–Ω–æ–º —Ä–æ–¥–µ –∏ –ø–∞–¥–µ–∂–µ
    getAdjective(adjective, gender = "–º", caseType = "–∏–º") {
        const adjData = this.grammar.adjectives[adjective];
        if (adjData && adjData.cases[caseType] && adjData.cases[caseType][gender]) {
            return adjData.cases[caseType][gender];
        }
        return adjective;
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –≤ –Ω—É–∂–Ω–æ–º –ø–∞–¥–µ–∂–µ
    getObject(object, caseType = "–≤–∏–Ω") {
        const objData = this.grammar.objects[object];
        if (objData && objData.cases[caseType]) {
            return objData.cases[caseType];
        }
        return object;
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è AI
    setupUI() {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –ª–∏ —É–∂–µ AI
        if (document.querySelector('.ai-ezhan-container')) {
            console.log('ü§ñ AI –ï–∂–∞–Ω —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω');
            return;
        }

        // –°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è AI
        const aiContainer = document.createElement('div');
        aiContainer.className = 'ai-ezhan-container';
        aiContainer.style.textAlign = 'center';
        aiContainer.style.margin = '30px 0';
        aiContainer.style.padding = '20px';
        aiContainer.style.background = 'var(--bg-card)';
        aiContainer.style.border = '1px solid var(--accent-red)';
        aiContainer.style.borderRadius = '10px';
        aiContainer.style.position = 'relative';
        aiContainer.style.overflow = 'hidden';

        // –ó–∞–≥–æ–ª–æ–≤–æ–∫ AI
        const aiTitle = document.createElement('h3');
        aiTitle.className = 'ai-title';
        aiTitle.innerHTML = 'ü§ñ AI –ï–ñ–ê–ù –ì–û–í–û–†–ò–¢:';
        aiTitle.style.color = 'var(--accent-red)';
        aiTitle.style.marginBottom = '15px';
        aiTitle.style.textTransform = 'uppercase';
        aiTitle.style.letterSpacing = '1px';

        // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ñ—Ä–∞–∑—ã
        const aiPhrase = document.createElement('div');
        aiPhrase.className = 'ai-phrase';
        aiPhrase.style.fontSize = '1.2rem';
        aiPhrase.style.fontWeight = '600';
        aiPhrase.style.color = 'var(--text-primary)';
        aiPhrase.style.minHeight = '60px';
        aiPhrase.style.display = 'flex';
        aiPhrase.style.alignItems = 'center';
        aiPhrase.style.justifyContent = 'center';
        aiPhrase.style.padding = '15px';
        aiPhrase.style.background = 'rgba(255, 51, 51, 0.05)';
        aiPhrase.style.borderRadius = '5px';
        aiPhrase.style.border = '1px solid var(--border-color)';
        aiPhrase.style.marginBottom = '20px';
        aiPhrase.innerHTML = '–ù–ê–ñ–ú–ò –ö–ù–û–ü–ö–£ –ß–¢–û–ë–´ –ü–û–†–û–ñ–î–ê–¢–¨ –î–ï–ì–ï–ù–ï–†–ê–¢–ò–í–ù–´–ï –§–†–ê–ó–´';

        // –ö–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
        const aiButton = document.createElement('button');
        aiButton.className = 'btn btn-primary ai-ezhan-btn';
        aiButton.innerHTML = 'ü§ñ AI –ï–ñ–ê–ù: –ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨ –§–†–ê–ó–£';
        aiButton.style.margin = '0 auto';
        aiButton.style.display = 'block';
        aiButton.style.padding = '12px 24px';
        aiButton.style.fontSize = '1rem';
        aiButton.style.fontWeight = '600';

        // –°–æ–±–∏—Ä–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        aiContainer.appendChild(aiTitle);
        aiContainer.appendChild(aiPhrase);
        aiContainer.appendChild(aiButton);

        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ—Å–ª–µ —Ü–∏—Ç–∞—Ç
        const quotesSection = document.querySelector('.quotes-section');
        if (quotesSection) {
            quotesSection.parentNode.insertBefore(aiContainer, quotesSection.nextSibling);
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏
        aiButton.addEventListener('click', () => {
            this.generateAndDisplayPhrase(aiPhrase, aiButton);
        });

        // –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        setTimeout(() => {
            this.generateAndDisplayPhrase(aiPhrase, aiButton);
        }, 1000);

        console.log('ü§ñ AI –ï–ñ–ê–ù –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!');
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ—Ä–∞–∑—ã
    generateAndDisplayPhrase(phraseElement, button) {
        // –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
        phraseElement.style.opacity = '0.5';
        phraseElement.innerHTML = 'ü§ñ AI –ï–ñ–ê–ù –î–£–ú–ê–ï–¢...';
        
        button.disabled = true;
        button.innerHTML = 'ü§ñ –ì–ï–ù–ï–†–ê–¶–ò–Ø...';
        
        // –ò–º–∏—Ç–∞—Ü–∏—è "–¥—É–º–∞–Ω–∏—è" AI
        setTimeout(() => {
            const newPhrase = this.generatePhrase();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
            phraseElement.style.opacity = '0';
            setTimeout(() => {
                phraseElement.innerHTML = newPhrase;
                phraseElement.style.opacity = '1';
                phraseElement.style.transform = 'scale(1.05)';
                
                setTimeout(() => {
                    phraseElement.style.transform = 'scale(1)';
                }, 200);
            }, 50);
            
            button.disabled = false;
            button.innerHTML = 'ü§ñ AI –ï–ñ–ê–ù: –ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨ –§–†–ê–ó–£';
            
            // –í–∏–±—Ä–∞—Ü–∏—è –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            if (navigator.vibrate) navigator.vibrate(50);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            if (window.NotificationManager) {
                NotificationManager.show('ü§ñ AI –ï–ñ–ê–ù –°–û–ó–î–ê–õ –ù–û–í–£–Æ –§–†–ê–ó–£!', 'success');
            }
            
        }, 800 + Math.random() * 800);
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AI –ï–∂–∞–Ω–∞
document.addEventListener('DOMContentLoaded', function() {
    // –ó–∞—â–∏—Ç–∞ –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    if (window.aiEzhanInstance) {
        console.log('ü§ñ AI –ï–∂–∞–Ω —É–∂–µ –∑–∞–ø—É—â–µ–Ω');
        return;
    }
    
    setTimeout(() => {
        try {
            window.aiEzhanInstance = new AIEzhan();
        } catch (error) {
            console.error('‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ AI:', error);
        }
    }, 1000);
});